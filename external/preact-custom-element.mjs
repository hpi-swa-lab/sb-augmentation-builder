/* esm.sh - esbuild bundle(preact-custom-element@4.3.0) es2022 production */
import{h as l,hydrate as _,render as p,cloneElement as m}from"./preact.mjs";function h(){return(h=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}var y=["context","children"];function g(e){this.getChildContext=function(){return e.context};var a=e.children,t=function(r,i){if(r==null)return{};var o,n,s={},c=Object.keys(r);for(n=0;n<c.length;n++)i.indexOf(o=c[n])>=0||(s[o]=r[o]);return s}(e,y);return m(a,t)}function C(){var e=new CustomEvent("_preact",{detail:{},bubbles:!0,cancelable:!0});this.dispatchEvent(e),this._vdom=l(g,h({},this._props,{context:e.detail.context}),function a(t,r){if(t.nodeType===3)return t.data;if(t.nodeType!==1)return null;var i=[],o={},n=0,s=t.attributes,c=t.childNodes;for(n=s.length;n--;)s[n].name!=="slot"&&(o[s[n].name]=s[n].value,o[v(s[n].name)]=s[n].value);for(n=c.length;n--;){var d=a(c[n],null),u=c[n].slot;u?o[u]=l(f,{name:u},d):i[n]=d}var b=r?l(f,null,i):i;return l(r||t.nodeName.toLowerCase(),o,b)}(this,this._vdomComponent)),(this.hasAttribute("hydrate")?_:p)(this._vdom,this._root)}function v(e){return e.replace(/-(\w)/g,function(a,t){return t?t.toUpperCase():""})}function E(e,a,t){if(this._vdom){var r={};r[e]=t=t??void 0,r[v(e)]=t,this._vdom=m(this._vdom,r),p(this._vdom,this._root)}}function O(){p(this._vdom=null,this._root)}function f(e,a){var t=this;return l("slot",h({},e,{ref:function(r){r?(t.ref=r,t._listener||(t._listener=function(i){i.stopPropagation(),i.detail.context=a},r.addEventListener("_preact",t._listener))):t.ref.removeEventListener("_preact",t._listener)}}))}function j(e,a,t,r){function i(){var o=Reflect.construct(HTMLElement,[],i);return o._vdomComponent=e,o._root=r&&r.shadow?o.attachShadow({mode:r.mode||"open"}):o,o}return(i.prototype=Object.create(HTMLElement.prototype)).constructor=i,i.prototype.connectedCallback=C,i.prototype.attributeChangedCallback=E,i.prototype.disconnectedCallback=O,t=t||e.observedAttributes||Object.keys(e.propTypes||{}),i.observedAttributes=t,t.forEach(function(o){Object.defineProperty(i.prototype,o,{get:function(){return this._vdom.props[o]},set:function(n){this._vdom?this.attributeChangedCallback(o,null,n):(this._props||(this._props={}),this._props[o]=n,this.connectedCallback());var s=typeof n;n!=null&&s!=="string"&&s!=="boolean"&&s!=="number"||this.setAttribute(o,n)}})}),customElements.define(a||e.tagName||e.displayName||e.name,i)}export{j as default};