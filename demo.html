<!doctype html>
<html>
  <head>
    <title>Core Demo</title>
    <link rel="stylesheet" href="./view/editor-style.css" />
    <link rel="stylesheet" href="./sandblocks/style.css" />
  </head>
  <body>
    <!--<scm-editor
      id="scm-editor"
      text='
class A {

  constructor() {
    this.a = 1;
  }

  test() {}
}
function StickyShard({ node, ...props }) {
  useEffect(() => {
    const editor = node.editor;
    editor.markSticky(node, true);
    return () => editor.markSticky(node, false);
  }, node);
  [[1], [2]]
  return shard(node, props);
}
export const stickyShard = (node, props = {}) =>
  h(StickyShard, { node, ...props });
export const shardList = (list) => {
  const node = new SBList(list);
  return h(node.editor.shardTag, { initNode: node, key: node.id });
};
export const icon = (name) =>
  h(
    "span",
    {
      class: "material-symbols-outlined",
      style: { fontSize: "inherit", verticalAlign: "bottom" },
    },
    name
  );
'
      extensions="browser:javascript javascript:table watch:javascript base:base"
      language="javascript"
    ></scm-editor>-->
    <script type="module">
      import {} from "./sandblocks/editor/editor.js";
      import {} from "./codemirror6/editor.js";
      import {} from "./test.js";
      import { Extension } from "./core/extension.js";
      import { SBMatcher } from "./core/model.js";
      import { languageFor } from "./core/languages.js";
      import { h } from "./external/preact.js";

      const ext = new Extension().registerReplacement({
        name: "test-hiding-replacement",
        query: new SBMatcher(languageFor("javascript"), [
          (x) => x.type === "number",
        ]),
        rerender: () => true,
        component: ({ node }) =>
          h("span", { style: { "background-color": "red" } }, node.text),
      });

      if (document.querySelector("#scm-editor"))
        document.querySelector("#scm-editor").extensions = [ext];
    </script>
  </body>
</html>
